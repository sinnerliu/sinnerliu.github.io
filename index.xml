<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>终点站</title>
    <link>https://blog.gofinall.com/</link>
    <description>Recent content on 终点站</description>
    <generator>Hugo -- gohugo.io</generator>
    
    <language>zh-CN</language>
    
    
    
    
    <lastBuildDate>Sun, 20 Aug 2017 21:38:52 +0800</lastBuildDate>
    
        <atom:link href="https://blog.gofinall.com/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>关于</title>
      <link>https://blog.gofinall.com/about/</link>
      <pubDate>Sun, 20 Aug 2017 21:38:52 +0800</pubDate>
      
      <guid>https://blog.gofinall.com/about/</guid>
      <description>&lt;p&gt;Hello World!&lt;/p&gt;

&lt;p&gt;本站作为博客(typecho)的备用站，等哪天我的博客主机(阿里云)没钱续费了，就直接在这个静态博客上更新了；&lt;/p&gt;

&lt;p&gt;博客主站：&lt;a href=&#34;https://gofinall.com&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://gofinall.com&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>MySQL 连接时尽量使用 127.0.0.1 而不是 localhost</title>
      <link>https://blog.gofinall.com/post/mysql-localhost/</link>
      <pubDate>Thu, 28 Nov 2019 13:23:54 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/mysql-localhost/</guid>
      <description>&lt;h3 id=&#34;原因&#34;&gt;原因&lt;/h3&gt;

&lt;p&gt;Whenever you specify &amp;ldquo;localhost&amp;rdquo; or &amp;ldquo;localhost:port&amp;rdquo; as server, the MySQL client library will override this and try to connect to a local socket (named pipe on Windows). If you want to use TCP/IP, use &amp;ldquo;127.0.0.1&amp;rdquo; instead of &amp;ldquo;localhost&amp;rdquo;. If the MySQL client library tries to connect to the wrong local socket, you should set the correct path as in your PHP configuration and leave the server field blank.&lt;/p&gt;

&lt;p&gt;localhost 使用的 Linux socket，127.0.0.1 使用的是 tcp/ip&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;为什么我使用-localhost-一直没出问题&#34;&gt;为什么我使用 localhost 一直没出问题&lt;/h3&gt;

&lt;p&gt;因为你的本机中只有一个 mysql 进程， 如果你有一个 node1 运行在 3306， 有一个 node2 运行在 3307&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mysql -u root -h localhost -P 3306
mysql -u root -h localhost -P 3307
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;都会连接到同一个 mysql 进程， 因为 localhost 使用 Linux socket， 所以 -P 字段直接被忽略了， 等价于&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mysql -u root -h localhost 
mysql -u root -h localhost 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;而 -h 默认是 localhost， 又等价于&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mysql -u root 
mysql -u root 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;为了避免这种情况（比如你在本地开发只有一个 mysql 进程，线上或者 qa 环境有多个 mysql 进程）最好的方式就是使用 IP&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mysql -u root -h 127.0.0.1 -P 3307
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;使用localhost地址的strace&#34;&gt;使用localhost地址的strace&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;strace mysql -h localhost -P 3306 -u root &amp;amp;&amp;gt; /tmp/strace_mysql.txt
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;结果：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;execve(&amp;quot;/opt/app/mysql/bin/mysql&amp;quot;, [&amp;quot;mysql&amp;quot;, &amp;quot;-h&amp;quot;, &amp;quot;localhost&amp;quot;, &amp;quot;-P&amp;quot;, &amp;quot;3306&amp;quot;, &amp;quot;-u&amp;quot;, &amp;quot;root&amp;quot;], [/* 25 vars */]) = 0

......

socket(AF_LOCAL, SOCK_STREAM, 0)        = 3
connect(3, {sa_family=AF_LOCAL, sun_path=&amp;quot;/tmp/mysql.sock&amp;quot;}, 110) = 0 // 这里
setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = -1 EOPNOTSUPP (Operation not supported)
setsockopt(3, SOL_SOCKET, SO_KEEPALIVE, [1], 4) = 0
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;使用ip地址的strace&#34;&gt;使用ip地址的strace&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;strace mysql -h 127.0.0.1 -P 3306 -u root &amp;amp;&amp;gt; /tmp/strace_mysql_use_ip.txt
execve(&amp;quot;/opt/app/mysql/bin/mysql&amp;quot;, [&amp;quot;mysql&amp;quot;, &amp;quot;-h&amp;quot;, &amp;quot;127.0.0.1&amp;quot;, &amp;quot;-P&amp;quot;, &amp;quot;3306&amp;quot;, &amp;quot;-u&amp;quot;, &amp;quot;root&amp;quot;], [/* 25 vars */]) = 0

....

socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(3306), sin_addr=inet_addr(&amp;quot;127.0.0.1&amp;quot;)}, 16) = 0
setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = 0
setsockopt(3, SOL_SOCKET, SO_KEEPALIVE, [1], 4) = 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;之前遇到过这个问题，但是没有找到原因，今天看到网友分享了经验，记录下&lt;/p&gt;

&lt;p&gt;转自：&lt;a href=&#34;https://www.v2ex.com/t/623596&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt; https://www.v2ex.com/t/623596 &lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Mysql出现Could not retrieve transaction read-only status from server报错</title>
      <link>https://blog.gofinall.com/post/mysql-read-only/</link>
      <pubDate>Tue, 10 Sep 2019 15:48:06 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/mysql-read-only/</guid>
      <description>&lt;h3 id=&#34;问题现象&#34;&gt;问题现象&lt;/h3&gt;

&lt;p&gt;mysql在java连接数据库的时候，&lt;code&gt;偶发性&lt;/code&gt;的出现如下错误：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;Could not retrieve transaction read-only status from server, nested exception is java.sql. SQLException: Could not retrieve transaction read-only status from server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;解决办法&#34;&gt;解决办法&lt;/h3&gt;

&lt;p&gt;mysql版本：&lt;code&gt;5.7.25&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;mysql jdbc驱动包：mysql-connector-java-5.1.47.jar&lt;/p&gt;

&lt;p&gt;mysql事务类型和java连接数据库的方法不匹配，根据网上搜索到的办法和自己实际使用的办法如下&lt;/p&gt;

&lt;p&gt;1.查看mysql的事物隔离级别  &lt;code&gt;SHOW VARIABLES LIKE &#39;%iso%&#39;;&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mysql&amp;gt; SHOW VARIABLES LIKE &#39;%iso%&#39;;
+------------------------+-----------------+
| Variable_name          | Value           |
+------------------------+-----------------+
| transaction_isolation  | REPEATABLE-READ |
| tx_isolation           | REPEATABLE-READ |
+------------------------+-----------------+
2 row in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2.修改mysql事务隔离级别&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mysql&amp;gt; SET GLOBAL tx_isolation=&#39;READ-COMMITTED&#39;; 
Query OK,0 rows affected (0.00 sec)

mysql&amp;gt; SET GLOBAL transaction_isolation=&#39;READ-COMMITTED&#39;; 
Query OK,0 rows affected (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3.修改my.cnf，让配置永久生效&lt;/p&gt;

&lt;p&gt;在&lt;code&gt;/etc/my.cnf&lt;/code&gt;(位置可能不一样)的&lt;code&gt;[mysqld]&lt;/code&gt;后面添加&lt;code&gt;transaction_isolation = READ-COMMITTED&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;4.检测事务隔离级别是否生效，第一步执行后几分钟后才能查询到；&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;mysql&amp;gt; SHOW VARIABLES LIKE &#39;%iso%&#39;;
+------------------------+-----------------+
| Variable_name          | Value           |
+------------------------+-----------------+
| transaction_isolation  | READ-COMMITTED |
| tx_isolation           | READ-COMMITTED |
+------------------------+-----------------+
2 row in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;后续问题&#34;&gt;后续问题&lt;/h3&gt;

&lt;p&gt;经过上面的修改，一段时间后还是出现了该问题，偶发出现，尝试方法有两个：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;把驱动包降到5.1.30还是有问题，尝试把驱动包升到mysql-connector-java-8.0.17.jar&lt;/li&gt;
&lt;li&gt;在jdbc串后面加参数：&lt;code&gt;failOverReadOnly=false&lt;/code&gt;  &lt;strong&gt;自动重连成功后，连接是否设置为只读&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;通过上面两种方式修改后，再观察下。/(ㄒoㄒ)/~~&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>MySQL常用json方法使用记录</title>
      <link>https://blog.gofinall.com/post/mysql-json/</link>
      <pubDate>Wed, 14 Aug 2019 17:15:21 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/mysql-json/</guid>
      <description>&lt;h3 id=&#34;介绍&#34;&gt;介绍&lt;/h3&gt;

&lt;p&gt;Mysql5.7版本以后提供了一个原生的Json类型，Json值将不再以字符串的形式存储，而是采用一种允许快速读取文本元素（document elements）的内部二进制（internal binary）格式。在Json列插入或者更新的时候将会自动验证Json文本，未通过验证的文本将产生一个错误信息。Json文本采用标准的创建方式，可以使用大多数的比较操作符进行比较操作，例如：=, &amp;lt;, &amp;lt;=, &amp;gt;, &amp;gt;=, &amp;lt;&amp;gt;, != 和 &amp;lt;=&amp;gt;。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;常用使用方法&#34;&gt;常用使用方法&lt;/h3&gt;

&lt;h4 id=&#34;创建有json字段的表&#34;&gt;创建有json字段的表&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;-- 创建表
CREATE TABLE table_json(id INT PRIMARY KEY, sname VARCHAR(20) , info  JSON);
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;查询记录&#34;&gt;查询记录&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;-- 查询记录
SELECT sname,JSON_EXTRACT(info,&#39;$.age&#39;) FROM table_json;
SELECT sname,info-&amp;gt;&#39;$.age&#39; FROM table_json;
-- 查询key
SELECT id,json_keys(info) FROM table_json;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;修改记录&#34;&gt;修改记录&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;-- 增加键
UPDATE table_json SET info = json_set(info,&#39;$.ip&#39;,&#39;192.168.1.1&#39;) WHERE id = 2;

-- 变更值
UPDATE table_json SET info = json_set(info,&#39;$.ip&#39;,&#39;192.168.1.2&#39;) WHERE id = 2;

-- 删除键
UPDATE table_json SET info = json_remove(info,&#39;$.ip&#39;) WHERE id = 2;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;插入&#34;&gt;插入&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;UPDATE table_json SET info = JSON_INSERT(info,&#39;$.user-agent&#39;,&#39;chrome&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;参考&#34;&gt;参考&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://dev.mysql.com/doc/refman/5.7/en/json-creation-functions.html&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://dev.mysql.com/doc/refman/5.7/en/json-creation-functions.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.cnblogs.com/ooo0/p/9309277.html&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://www.cnblogs.com/ooo0/p/9309277.html&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>又一次长春出差后的感想</title>
      <link>https://blog.gofinall.com/post/changchun-1/</link>
      <pubDate>Tue, 13 Aug 2019 16:42:11 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/changchun-1/</guid>
      <description>&lt;h3 id=&#34;背景&#34;&gt;背景&lt;/h3&gt;

&lt;p&gt;又一次长春出差，直达的飞机差不多5小时，本就疲惫不堪，但是下飞机后打出租车更让人心累；&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;经历&#34;&gt;经历&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;2014年的时候，去过一次长春，从机场打出租车到市区，出租车司机不按照打表的价格收费，要价150，实际打表的价格在110多点，由于出差，需要发票报销，出租车司机说给定额票，在人家地盘上，我也不敢说啥；&lt;/li&gt;
&lt;li&gt;2015年的时候，又去了一次长春，打出租车照旧喊价，但是不是给的定额票，司机直接从车里拿出另一个‘计价器’，问要好多的票，他们直接用这个‘计价器’打出来；&lt;/li&gt;
&lt;li&gt;2016年的时候，又又去了一次长春，打车还是老规矩，更要命的是去机场的时候，把我和另一个同事直接丢路上，让我们去坐另外的出租车，上车一看，车上已经有两个去机场，然后我们四个大老爷们挤着去了机场，但这次是按照打表给的票；&lt;/li&gt;
&lt;li&gt;前段时间，又又又去了一次长春，上出租车，师傅说打表，心想着这次出租车良心了，但是到了目的地后，打表的价格是160多，记得上次打表才110左右，我也不敢问，给钱拿票走人；&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;感想&#34;&gt;感想&lt;/h3&gt;

&lt;p&gt;出租车是一个城市的门面，尤其是跑机场、火车站，外地人来了接触的第一个本地事物，不应该有喊价、调表(猜测)、强制拼车等行为，给人留下的印象不好；又加上大部分东北爷们脾气暴躁(网传)，又不敢给他们理论，也就只有默默的接受了。&lt;/p&gt;

&lt;h3 id=&#34;建议&#34;&gt;建议&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;网约车：去机场和到市区，可以打网约车，价格是平台订的，相对透明，不坑；&lt;/li&gt;
&lt;li&gt;城际火车：不赶时间的，或者去市中心附近的，可以坐城际火车，价格便宜(10块左右)，时间快(10多分钟)，城际火车大概是1个小时一趟，可以直接在机场下面坐，或者从市中心的火车站坐到机场。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上是个人实际经历，勿怼。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>斐讯N1折腾记1-刷入armbian</title>
      <link>https://blog.gofinall.com/post/feixun-n1-1/</link>
      <pubDate>Tue, 23 Jul 2019 10:26:06 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/feixun-n1-1/</guid>
      <description>&lt;h3 id=&#34;n1介绍&#34;&gt;N1介绍&lt;/h3&gt;

&lt;p&gt;斐讯N1原来的定位: NAS和区块链设备，后来斐讯翻车和被很多大神破解，刷入不同的固件，从而让它能实现各种功能，再加上目前低廉的价格，让它的可玩性和性价比都极高。&lt;/p&gt;

&lt;p&gt;如果你不是拿来做开发、需要GPIO开发等一个N1显然更实用，适合普通人的生活需求，树莓派对于开发者比较友好一些。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h4 id=&#34;硬件配置&#34;&gt;硬件配置&lt;/h4&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;N1&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;CPU&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Amlogic S905D, 4-Core Cortex-A53, 1.8Ghz&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;GPU&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mail-450&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;RAM&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;2G&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Storage&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;8G EMMC&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Network&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;BT4, 802.11 n/ac&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;Interface&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;HDMI * 1, USB * 2, 1000M Ethernet * 1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;用途&#34;&gt;用途&lt;/h3&gt;

&lt;p&gt;N1的核心功能就是看网络电视，主系统是Android 7，下载电视版APP可以看很多节目、电影等，如果通过刷机可以获得更多功能。刷Linux系统可以获得一台小型服务器，配合内网穿透和DDNS可以当一个低功耗小型服务器。可以作为下载服务器，有专门的下载优化固件，专注下载。N1的接口有: 网线接口、HDMI接口和两个USB2.0接口，需要大量文件传输的话速度比较一般。&lt;/p&gt;

&lt;p&gt;上周从PDD上买入N1，84元，价格还算可以。&lt;/p&gt;

&lt;h3 id=&#34;折腾准备&#34;&gt;折腾准备&lt;/h3&gt;

&lt;h4 id=&#34;环境准备&#34;&gt;环境准备&lt;/h4&gt;

&lt;p&gt;下载好adb相关的工具&lt;/p&gt;

&lt;p&gt;相关工具下载可用&lt;a href=&#34;https://cnone.lty.fun/home/工具库/N1&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://cnone.lty.fun/home/%E5%B7%A5%E5%85%B7%E5%BA%93/N1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;感谢&lt;a href=&#34;https://luotianyi.vc/&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;Luminous&lt;/a&gt;提供和分享相关工具。&lt;/p&gt;

&lt;h4 id=&#34;降级&#34;&gt;降级&lt;/h4&gt;

&lt;p&gt;当n1的系统版本在 V2.19 以上的都必须先降级才能刷机，由于我为了少折腾，直接买的是刷好了yyf的精简固件的，降级教程网上很多，此文章就忽略了。&lt;/p&gt;

&lt;h4 id=&#34;刷入armbian&#34;&gt;刷入armbian&lt;/h4&gt;

&lt;h5 id=&#34;系统选择&#34;&gt;系统选择&lt;/h5&gt;

&lt;p&gt;网上大神制作的N1系统有：debian、ubuntu、centos，参考网上反馈使用的稳定性，最终选择了ubuntu，&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Armbian_5.77_Aml-s905_Ubuntu_bionic_default_5.0.2_20190401.img.xz&lt;/code&gt;&lt;/p&gt;

&lt;h5 id=&#34;制作u盘系统&#34;&gt;制作U盘系统&lt;/h5&gt;

&lt;p&gt;本人使用的是闪迪的cz33，听说兼容性好点；&lt;/p&gt;

&lt;p&gt;使用&lt;code&gt;usbit&lt;/code&gt;或者&lt;code&gt;win32diskimager&lt;/code&gt;烧录固件到U盘，本文使用&lt;code&gt;usbit&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://blog.gofinall.com/post/images/n1-1.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;注意此操作会格式化U盘&lt;/strong&gt;，将一个8G以上的U盘插入电脑，在左侧选择U盘，然后再点击Restore，然后选择刚才解压出来的.img镜像，一路yes就会开始写入U盘，等着写入结束即可，当写入结束后，&lt;strong&gt;windows系统会弹出一个格式化的提示，此时不要点格式化，否则写入的系统会被清掉&lt;/strong&gt;&lt;/p&gt;

&lt;h5 id=&#34;修改引导dtb&#34;&gt;修改引导dtb&lt;/h5&gt;

&lt;p&gt;如果不修改dtb，可能会导致系统负载长期在2.0以上。&lt;/p&gt;

&lt;p&gt;刻录完的U盘会有一个可读取分区和一个不可读取分区，进入可读取的那个分区，把&lt;code&gt;meson-gxl-s905d-phicomm-n1-xiangsm.dtb&lt;/code&gt;放到U盘的可读分区的dtb目录下，用&lt;code&gt;Notepad++&lt;/code&gt;编辑uEnv.ini，&lt;strong&gt;切记不可用windows自带的记事本&lt;/strong&gt;，把文件里的dtb_name后面的文件名换成&lt;code&gt;meson-gxl-s905d-phicomm-n1-xiangsm.dtb&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#dtb_name=/dtb/meson-gxm-khadas-vim2.dtb
dtb_name=/dtb/meson-gxl-s905d-phicomm-n1-xiangsm.dtb
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;修改系统可从u盘启动&#34;&gt;修改系统可从U盘启动&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;把盒子插上显示器，查看盒子的ip地址，如：&lt;code&gt;192.168.1.100&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;进入包含&lt;code&gt;adb.exe&lt;/code&gt;目录，按住&lt;code&gt;shift&lt;/code&gt;然后再点击右键，选择&lt;code&gt;在此处打开PowerShell窗口&lt;/code&gt;，在打开的PowerShell窗口先后运行这两条指令&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;.\adb.exe connect 192.168.1.100
.\adb.exe shell reboot update
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;执行完成后，看到显示器上盒子已经在重启阶段，迅速把U盘插到靠近hdmi口的usb口(听说这个口兼容性好点，具体未实验)，等待系统重启进入linux系统，&lt;strong&gt;此步骤中，切记不能开着盒子插入U盘，在安卓系统下插入U盘会导致U盘上的文件属组改变，可以等上面的adb命令执行完成后，关闭盒子，再插入U盘，再启动盒子&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&#34;初始化系统&#34;&gt;初始化系统&lt;/h5&gt;

&lt;p&gt;如果有键盘，插入另一个usb口，输入登录账号&lt;code&gt;root&lt;/code&gt;，root密码为&lt;code&gt;1234&lt;/code&gt;，登录后提示创建用户，直接&lt;code&gt;ctrl+c&lt;/code&gt;取消即可。&lt;/p&gt;

&lt;p&gt;如果没有键盘，可以用&lt;code&gt;ScanPort.exe&lt;/code&gt;来扫描网段内22端口的ip，或者直接去路由器上查看盒子的ip地址&lt;/p&gt;

&lt;p&gt;如果不需要把系统写入盒子的emmc中，整个过程就结束了&lt;/p&gt;

&lt;p&gt;用putty登录linux，如下&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://blog.gofinall.com/post/images/n1-2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;安装应用&#34;&gt;安装应用&lt;/h3&gt;

&lt;p&gt;可以安装的应用挺多的，现在很多软件都有arm的，如：frp、n2n、php、nginx、docker等，等有空了把我阿里云上的typecho博客迁移到N1上来。&lt;/p&gt;

&lt;p&gt;人生在于折腾。&lt;/p&gt;

&lt;p&gt;参考:&lt;a href=&#34;https://luotianyi.vc/1306.html&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://luotianyi.vc/1306.html&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Nginx反代Websocket 403报错</title>
      <link>https://blog.gofinall.com/post/nginx-websocket/</link>
      <pubDate>Fri, 12 Jul 2019 18:24:50 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/nginx-websocket/</guid>
      <description>&lt;h3 id=&#34;背景&#34;&gt;背景&lt;/h3&gt;

&lt;p&gt;由于服务器对外只有一个端口，需要用nginx把服务器上多个tomcat的地址代理出来，工程中需要用Websocket，按照网上常规配置后，部分Websocket访问报403错误，部分Websocket正常。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;nginx版本&#34;&gt;nginx版本&lt;/h3&gt;

&lt;p&gt;1.14.2&lt;/p&gt;

&lt;h3 id=&#34;配置&#34;&gt;配置&lt;/h3&gt;

&lt;p&gt;最开始的配置如下&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection &amp;quot;upgrade&amp;quot;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;配置后，部分Websocket访问报403错误，部分Websocket正常。经过google后，参考&lt;a href=&#34;https://github.com/drone/drone/issues/767&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;websocket problem when deployed behind nginx&lt;/a&gt;，后新增如下配置，重启nginx就好了。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;proxy_set_header Origin &#39;&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;完整的配置如下&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt; location /api/stream {
        proxy_pass http://127.0.0.1:8000;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &amp;quot;upgrade&amp;quot;;

        proxy_set_header Origin &#39;&#39;;
    }
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>利用Proxychains在终端使用socks5/http代理</title>
      <link>https://blog.gofinall.com/post/proxychains-ng/</link>
      <pubDate>Thu, 06 Jun 2019 14:33:31 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/proxychains-ng/</guid>
      <description>&lt;h3 id=&#34;背景&#34;&gt;背景&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;在国内的服务器上从github上拉代码或者go get的时候非常慢(网络受阻)的时候。&lt;/li&gt;
&lt;li&gt;当内网的某些服务器不能上外网，但是内网中有一台电脑能上外网，想让不能上外网的服务器上外网的时候。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;proxychains可以非常简单快速的设置好代理，让其它不能上网的服务器通过能上网的服务器进行上网。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;下载地址&#34;&gt;下载地址&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/rofl0r/proxychains-ng&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://github.com/rofl0r/proxychains-ng&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;安装方法&#34;&gt;安装方法&lt;/h3&gt;

&lt;p&gt;1  拉取代码&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;git clone git@github.com:rofl0r/proxychains-ng.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2  编译安装&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[root@localhost proxychains-ng]# cd proxychains-ng
[root@localhost proxychains-ng]# ./configure
[root@localhost proxychains-ng]# make
[root@localhost proxychains-ng]# make install
[root@localhost proxychains-ng]# cp src/proxychains.conf /usr/local/etc/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3  修改配置文件&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;[root@localhost proxychains-ng]# vi /usr/local/etc/proxychains.conf
#修改最后ProxyList里面的参数，假如我的代理地址为socks5:192.168.137.130 1080
#将socks4 127.0.0.1 9095改为
socks5         192.168.137.130 1080
#如果是http代理，则把socks5改成http
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4  使用方法&lt;/p&gt;

&lt;p&gt;在需要进行代理的命令前加&lt;code&gt;proxychains&lt;/code&gt;即可，如：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;#直接访问网络不通的网址
[root@localhost]# curl http://ifconfig.me
curl: (6) Couldn&#39;t resolve host &#39;ifconfig.me&#39;
#使用代理的方式访问
[root@localhost]# proxychains curl http://ifconfig.me
[proxychains] config file found: /usr/local/etc/proxychains.conf
[proxychains] preloading /usr/local/lib/libproxychains4.so
[proxychains] DLL init
[proxychains] Strict chain ... 192.168.137.130:1080 ... ifconfig.me:80 ... OK
119.44.127.54
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;使用curl、yum、git clone、go get等命令的时候，都只要在前面加上proxychains，就都可以通过192.168.137.130的网络进行访问。&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>Windows使用NSSM将任意exe封装为服务</title>
      <link>https://blog.gofinall.com/post/windows-service-nssm/</link>
      <pubDate>Thu, 23 May 2019 14:32:58 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/windows-service-nssm/</guid>
      <description>&lt;h3 id=&#34;介绍&#34;&gt;介绍&lt;/h3&gt;

&lt;p&gt;NSSM是一个服务封装程序，它可以将普通exe程序封装成服务，使之像windows服务一样运行。同类型的工具还有微软自己的srvany，不过nssm更加简单易用，并且功能强大。它的特点如下：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;支持普通exe程序（控制台程序或者带界面的Windows程序都可以）&lt;/li&gt;
&lt;li&gt;安装简单，修改方便&lt;/li&gt;
&lt;li&gt;可以重定向输出（并且支持Rotation）&lt;/li&gt;
&lt;li&gt;可以自动守护封装了的服务，程序挂掉了后可以自动重启&lt;/li&gt;
&lt;li&gt;可以自定义环境变量&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;官网&#34;&gt;官网&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;http://nssm.cc/&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;http://nssm.cc&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;使用&#34;&gt;使用&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;下载最新版本&lt;a href=&#34;http://nssm.cc/ci/nssm-2.24-103-gdee49fc.zip&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;nssm&lt;/a&gt;，也可以下载最新release版本；&lt;/li&gt;
&lt;li&gt;根据自己的平台，将32/64位nssm.exe文件解压至任意文件夹。&lt;/li&gt;
&lt;li&gt;cmd定位至nssm.exe所在目录。&lt;/li&gt;
&lt;li&gt;输入 &lt;code&gt;nssm install {服务名称}&lt;/code&gt;，即注册服务的名称。注册服务弹出如下NSSM界面。
&lt;img src=&#34;https://blog.gofinall.com/post/images/nssm.png&#34; alt=&#34;&#34; /&gt;&lt;/li&gt;
&lt;li&gt;Application标签设置：&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
&lt;li&gt;Application Path: 选择系统安装的exe。&lt;/li&gt;
&lt;li&gt;Startup directory: 选择exe项目的根目录。&lt;/li&gt;
&lt;li&gt;Arguments: 输入启动参数&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;上述步骤操作完成，即可点击Install service来注册服务。我们在系统的服务中即可找到刚刚注册的服务。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;在系统服务中找到刚刚注册的服务，右键&lt;code&gt;属性 - 恢复&lt;/code&gt;即可设置此服务挂掉重启等内容。&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;其它界面的是高级参数的配置，可以根据需要自行选择。&lt;/p&gt;

&lt;p&gt;参数填完后执行&amp;rdquo;install service&amp;rdquo;按钮即可将服务安装到系统，可以使用系统的服务管理工具查看了。&lt;/p&gt;

&lt;p&gt;当然，如果要自动化安装，可以直接带上程序路径：&lt;code&gt;nssm install &amp;lt;servicename&amp;gt; &amp;lt;program&amp;gt; [&amp;lt;arguments&amp;gt;]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;NSSM本身win7及以上的系统基本都是支持的，我测试过win7，2008,2016系统，都是没有问题的，如果安装失败，请首先检查是否装了某国产管家或国产杀毒软件。&lt;/p&gt;

&lt;p&gt;安装完成后，服务还没有启动，需要通过下面的服务管理的命令启动服务。&lt;/p&gt;

&lt;h4 id=&#34;服务管理&#34;&gt;服务管理&lt;/h4&gt;

&lt;p&gt;服务管理主要有启动、停止和重启，其命令如下：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;启动服务：&lt;code&gt;nssm start &amp;lt;servicename&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;停止服务： &lt;code&gt;nssm stop &amp;lt;servicename&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;重启服务:    &lt;code&gt;nssm restart &amp;lt;servicename&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;当然，也可以使用系统自带的服务管理器操作和使用系统的命令。&lt;/p&gt;

&lt;h4 id=&#34;修改参数&#34;&gt;修改参数&lt;/h4&gt;

&lt;p&gt;NSSM安装的服务修改起来非常方便，命令如下：&lt;/p&gt;

&lt;p&gt;&lt;code&gt;nssm edit &amp;lt;servicename&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;会自动启动操作界面，直接更改即可。&lt;/p&gt;

&lt;h4 id=&#34;服务删除&#34;&gt;服务删除&lt;/h4&gt;

&lt;p&gt;服务删除可以使用如下命令之一：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nssm remove &amp;lt;servicename&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nssm remove &amp;lt;servicename&amp;gt; confirm&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;功能没有大的区别，后面的命令是自动确认的，没有交互界面。&lt;/p&gt;

&lt;h4 id=&#34;命令行&#34;&gt;命令行&lt;/h4&gt;

&lt;p&gt;服务自动化需要使用更多的命令行，具体参看官方文档： &lt;a href=&#34;https://nssm.cc/commands&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://nssm.cc/commands&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;如下是一个官方安装Jenkins服务的示例：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;nssm install Jenkins %PROGRAMFILES%\Java\jre7\bin\java.exe
nssm set Jenkins AppParameters -jar slave.jar -jnlpUrl https://jenkins/computer/%COMPUTERNAME%/slave-agent.jnlp -secret redacted
nssm set Jenkins AppDirectory C:\Jenkins
nssm set Jenkins AppStdout C:\Jenkins\jenkins.log
nssm set Jenkins AppStderr C:\Jenkins\jenkins.log
nssm set Jenkins AppStopMethodSkip 6
nssm set Jenkins AppStopMethodConsole 1000
nssm set Jenkins AppThrottle 5000
nssm start Jenkins
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>chrome 73 版本上安装crx插件出现「程序包无效 CRX_HEADER_INVALID」的报错解决办法</title>
      <link>https://blog.gofinall.com/post/chrome-install-crx/</link>
      <pubDate>Sat, 18 May 2019 11:00:04 +0800</pubDate>
      <author> 死性不改 </author>
      <guid>https://blog.gofinall.com/post/chrome-install-crx/</guid>
      <description>&lt;h3 id=&#34;背景&#34;&gt;背景&lt;/h3&gt;

&lt;p&gt;在最新版 chrome 73 版本上，通过打开开发者模式，通过拖入crx文件来安装扩展，会出现「程序包无效 CRX_HEADER_INVALID」的报错，不想把crx解压了直接加载安装。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h3 id=&#34;原因&#34;&gt;原因&lt;/h3&gt;

&lt;p&gt;chrome 更了的 crx3 的签名&lt;/p&gt;

&lt;p&gt;参考: &lt;a href=&#34;https://bugs.chromium.org/p/chromium/issues/detail?id=941356&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;https://bugs.chromium.org/p/chromium/issues/detail?id=941356&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;解决办法&#34;&gt;解决办法&lt;/h3&gt;

&lt;p&gt;可以通过&amp;rsquo;get crx&amp;rsquo;插件来下载谷歌商店插件保存成crx文件：&lt;a href=&#34;https://chrome.google.com/webstore/detail/get-crx/dijpllakibenlejkbajahncialkbdkjc&#34; rel=&#34;noreferrer&#34; target=&#34;_blank&#34;&gt;Get CRX&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;重新从谷歌网上应用商店下载新版本的crx即可&lt;/strong&gt;，拖入&lt;code&gt;get crx&lt;/code&gt;下载的插件即可安装。&lt;/p&gt;

&lt;p&gt;顺便在分享几个常用插件，方便不能上谷歌商店的人下载，下载后直接拖入即可安装。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://blog.gofinall.com/post/files/SwitchyOmega-v2.5.20.crx&#34;&gt;SwitchyOmega-v2.5.20.crx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://blog.gofinall.com/post/files/uBlock Origin-v1.19.2.crx&#34;&gt;uBlock Origin-v1.19.2.crx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://blog.gofinall.com/post/files/Tampermonkey-v4.8.41.crx&#34;&gt;Tampermonkey-v4.8.41.crx&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>